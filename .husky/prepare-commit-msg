#!/usr/bin/env sh

# Enforce conventional branch names: <type>/<short-description>
# Skip validation during rebase/merge
if [ -d ".git/rebase-merge" ] || [ -d ".git/rebase-apply" ] || [ -f ".git/MERGE_HEAD" ]; then
  exit 0
fi

BRANCH_NAME=$(git symbolic-ref --short HEAD 2>/dev/null || true)

case "$BRANCH_NAME" in
  feat/*|fix/*|chore/*|docs/*|refactor/*|test/*|ci/*|build/*|perf/*)
    ;;
  *)
    echo "Invalid branch name: $BRANCH_NAME" >&2
    echo "Expected: feat/*, fix/*, chore/*, docs/*, refactor/*, test/*, ci/*, build/*, perf/*" >&2
    exit 1
    ;;
esac


